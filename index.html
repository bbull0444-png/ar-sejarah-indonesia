<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Sejarah Indonesia</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }

        #info-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 1000; display: none;
            align-items: center; justify-content: center; padding: 20px;
        }
        #info-overlay.show { display: flex; }

        #info-content {
            background: white; border-radius: 15px; padding: 30px;
            max-width: 800px; max-height: 70vh; overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        #info-content h1 { color: #8B4513; margin-bottom: 20px; font-size: 28px; text-align: center; }
        #info-content h2 { color: #A0522D; margin-top: 20px; margin-bottom: 10px; font-size: 20px; }
        #info-content p { color: #333; line-height: 1.8; margin-bottom: 15px; font-size: 15px; }

        #close-info {
            display: block; margin: 25px auto 0; padding: 12px 40px;
            background: #8B4513; color: white; border: none; border-radius: 25px;
            font-size: 16px; cursor: pointer; font-weight: bold;
        }
        #close-info:hover { background: #A0522D; }

        #instructions {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(139,69,19,0.9); color: white; padding: 15px 30px;
            border-radius: 30px; z-index: 998; text-align: center; font-size: 14px;
            max-width: 90%;
        }

        .loading {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%);
            color: white; font-size: 18px; z-index: 997;
            background: rgba(0,0,0,0.7); padding: 20px 40px; border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="info-overlay"><div id="info-content"></div></div>
    <div id="instructions">ðŸ“· Arahkan kamera ke barcode marker (0-9)</div>
    <div class="loading" id="loading">Memuat AR...</div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;" vr-mode-ui="enabled: false">
        
        <a-entity camera></a-entity>

        <!-- Barcode 0: Borobudur -->
        <a-marker type="barcode" value="0">
            <a-entity gltf-model="url(Borobudur.glb)" scale="1 1 1" position="0 0.5 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 1: Prasasti -->
        <a-marker type="barcode" value="1">
            <a-entity gltf-model="url(models/prasasti-ciaruteun.glb)" scale="0.5 0.5 0.5" position="0 0.3 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 2: Dolmen -->
        <a-marker type="barcode" value="2">
            <a-entity gltf-model="url(models/dolmen.glb)" scale="0.8 0.8 0.8" position="0 0.4 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 3: Arca -->
        <a-marker type="barcode" value="3">
            <a-entity gltf-model="url(models/arca-buddha.glb)" scale="0.6 0.6 0.6" position="0 0.3 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 4: Kjokken -->
        <a-marker type="barcode" value="4">
            <a-entity gltf-model="url(models/kjokkenmoddinger.glb)" scale="0.4 0.4 0.4" position="0 0.2 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 5: Menhir -->
        <a-marker type="barcode" value="5">
            <a-entity gltf-model="url(models/menhir.glb)" scale="0.7 0.7 0.7" position="0 0.4 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 6: Prambanan -->
        <a-marker type="barcode" value="6">
            <a-entity gltf-model="url(models/prambanan.glb)" scale="1 1 1" position="0 0.5 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 7: Brahma -->
        <a-marker type="barcode" value="7">
            <a-entity gltf-model="url(models/brahma.glb)" scale="0.5 0.5 0.5" position="0 0.3 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 8: Meganthropus -->
        <a-marker type="barcode" value="8">
            <a-entity gltf-model="url(models/meganthropus.glb)" scale="0.4 0.4 0.4" position="0 0.3 0" rotation="-90 0 0"></a-entity>
        </a-marker>

        <!-- Barcode 9: Homo Erectus -->
        <a-marker type="barcode" value="9">
            <a-entity gltf-model="url(models/homo-erectus.glb)" scale="0.4 0.4 0.4" position="0 0.3 0" rotation="-90 0 0"></a-entity>
        </a-marker>
    </a-scene>

    <script>
        const loading = document.querySelector('#loading');
        const infoOverlay = document.getElementById('info-overlay');
        const infoContent = document.getElementById('info-content');

        const objInfo = {
            0: { title: "ðŸ•Œ Candi Borobudur", text: "Dibangun pada masa Dinasti Syailendra sekitar tahun 780â€“830 M oleh Raja Samaratungga." },
            1: { title: "ðŸ“œ Prasasti Ciaruteun", text: "Prasasti peninggalan Kerajaan Tarumanegara ditemukan di Cibungbulang, Bogor." },
            2: { title: "ðŸª¨ Dolmen", text: "Meja batu besar dari batu tegak penyangga dan batu datar di atasnya." },
            3: { title: "ðŸ™ Arca Buddha", text: "Arca Buddha dengan mudra Dharmacakra yang melambangkan pemutaran roda dharma." },
            4: { title: "ðŸš Kjokkenmoddinger", text: "Tumpukan kulit kerang manusia purba tepi pantai masa Mesolitikum." },
            5: { title: "ðŸ—¿ Menhir", text: "Batu tegak megalitik sebagai penghormatan leluhur." },
            6: { title: "ðŸ›• Candi Prambanan", text: "Dibangun era Kerajaan Mataram Kuno (abad 8-10). Terdiri 240 struktur candi." },
            7: { title: "ðŸ”± Dewa Brahma", text: "Dewa pencipta alam semesta dalam Trimurti." },
            8: { title: "ðŸ¦´ Meganthropus", text: "Manusia purba tertua di Indonesia, ditemukan di Sangiran." },
            9: { title: "ðŸš¶ Homo Erectus", text: "Fosil pertama ditemukan Eugene Dubois (1891) di Trinil, Jawa Timur." }
        };

        const markers = document.querySelectorAll('a-marker');
        
        markers.forEach((marker, index) => {
            marker.addEventListener('markerFound', () => {
                loading.style.display = 'none';
                const barcodeValue = marker.getAttribute('value');
                showInfo(barcodeValue);
            });

            marker.addEventListener('markerLost', () => {
                loading.style.display = 'block';
                loading.textContent = 'Marker hilang...';
                infoOverlay.classList.remove('show');
            });
        });

        function showInfo(value) {
            const info = objInfo[value];
            if (info) {
                infoContent.innerHTML = '<h1>' + info.title + ' (Barcode ' + value + ')</h1><p>' + info.text + '</p><button id="close-info">Tutup</button>';
                document.getElementById('close-info').onclick = () => infoOverlay.classList.remove('show');
                infoOverlay.classList.add('show');
            }
        }

        infoOverlay.addEventListener('click', (e) => {
            if (e.target.id === 'info-overlay') infoOverlay.classList.remove('show');
        });

        setTimeout(() => { loading.textContent = 'Cari barcode marker...'; }, 2000);
    </script>
</body>
</html>
